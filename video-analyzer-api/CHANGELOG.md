# Журнал изменений

## [Не выпущено]

### Добавлено

- Поддержка указания языка для модели транскрипции Whisper
- Возможность настройки размера модели Whisper через переменные окружения
- Более детальные типы для передаваемых данных
- Валидация входных параметров запросов
- Добавлена поддержка конфигурации языка для Whisper модели
- Детализированная информация о сегментах речи с таймкодами в выходных данных API
- Включены временные метки для каждого сегмента речи, скорректированные по времени начала сцены
- Идентификаторы сцен для каждого сегмента речи для упрощения навигации

### Изменено

- Улучшена структура кода с акцентом на функциональность
- Разделение AnalysisPipeline на более мелкие функции
- Улучшена обработка ошибок в AudioAnalyzer
- Исправлена ошибка с передачей языка в AudioAnalyzer
- Оптимизированы параметры декодирования для модели Whisper
- Улучшена структура ответа API, включающая сегменты речи с таймкодами
- Снижена частота дискретизации аудио до 16кГц для ускорения обработки
- Добавлена валидация входных параметров и проверка существования файлов

### Оптимизировано

- Более информативное логирование
- Добавлена дополнительная валидация входных данных
- Более эффективное переиспользование кода
- Удалены неиспользуемые зависимости (pydub, torchaudio, python-multipart)
- Оптимизирован Dockerfile (удалены неиспользуемые директории)
- Удален неиспользуемый код в main.py
- Добавлены детальные логи для отладки модели Whisper
- Оптимизирован процесс анализа аудио для более быстрой обработки
- Рефакторинг метода analysis_pipeline для сбора и интеграции сегментов из всех сцен

## Настройка переменных окружения

Сервис поддерживает следующие переменные окружения:

- `WHISPER_MODEL_SIZE`: Размер модели Whisper (tiny, base, small, medium, large)
- `WHISPER_LANGUAGE`: Язык для Whisper модели по умолчанию (ISO код, например 'ru', 'en')
